<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>happy birthday annie</title>

<style>
html,body{
  margin:0;
  padding:0;
  width:100%;
  height:100%;
  background:#ffd7e8;
  overflow:hidden;
  font-family:"Comic Sans MS",cursive;
}

#app{
  width:100%;
  height:100%;
  position:relative;
}

/* slides */
.slide{
  position:absolute;
  inset:0;
  display:none;
  justify-content:center;
  align-items:center;
}
.slide img{
  max-width:70%;
  max-height:70%;
}

/* bow */
#bow{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  display:none;
  gap:8px;
  z-index:5;
}
#bow img{
  width:160px;
  transition:0.6s;
}
#bow.untie img:first-child{
  transform:translateX(-220px) rotate(-20deg);
  opacity:0;
}
#bow.untie img:last-child{
  transform:translateX(220px) rotate(20deg);
  opacity:0;
}

/* door */
#door{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  display:none;
  max-width:300px;
  z-index:4;
}

/* main */
#main{
  display:none;
  width:100%;
  height:100%;
  position:relative;
}
#title{
  position:absolute;
  top:8%;
  left:50%;
  transform:translateX(-50%);
  font-size:3em;
  color:white;
  text-shadow:2px 2px 6px #ff9ed9;
}

/* floating images */
.float{
  position:absolute;
  width:90px;
  animation:float 4s ease-in-out infinite alternate;
  cursor:grab;
}
@keyframes float{
  from{transform:translateY(0)}
  to{transform:translateY(-25px)}
}
</style>
</head>

<body>
<div id="app"></div>

<audio id="ribbonSound" src="ribbon.mp3"></audio>
<audio id="doorSound" src="doorwow.mp3"></audio>

<script>
const app = document.getElementById("app");

/* slides */
const slides = [
  "slide1.png",
  "slide2.png",
  "slide3.png",
  "slide4.png",
  "slide5.png"
];
let slideIndex = 0;

slides.forEach((src,i)=>{
  const s = document.createElement("div");
  s.className = "slide";
  if(i===0) s.style.display = "flex";
  const img = document.createElement("img");
  img.src = src;
  s.appendChild(img);
  app.appendChild(s);
});

const slideEls = document.querySelectorAll(".slide");

/* bow */
const bow = document.createElement("div");
bow.id = "bow";
bow.innerHTML = `
  <img src="bowleft.png">
  <img src="bowright.png">
`;
app.appendChild(bow);

/* door */
const door = document.createElement("img");
door.id = "door";
door.src = "doorclosed.png";
app.appendChild(door);

/* main */
const main = document.createElement("div");
main.id = "main";
main.innerHTML = `<div id="title">Happy Birthday Annie</div>`;
app.appendChild(main);

/* floating images */
const pics = [
  "pic2.png","pic3.png","pic4.png","pic5.png","pic6.png",
  "pic7.png","pic8.png","pic9.png","pic10.png",
  "pic11.png","pic12.png","pic13.png","pic14.png",
  "pic15.png","pic16.png","pic18.png","pic19.png",
  "pic20.png","pic21.png","pic22.png","pic23.png",
  "pic24.png","pic25.png","pic26.png","pic28.png",
  "pic29.png","pic30.png","pic31.png","pic32.png",
  "pic33.png","pic34.png","pic35.png","pic36.png",
  "pic38.png","pic39.png","pic40.png","pic41.png",
  "pic42.png","pic43.png","pic44.png","pic45.png"
];

pics.forEach(src=>{
  const img = document.createElement("img");
  img.src = src;
  img.className = "float";
  img.style.left = Math.random()*85 + "%";
  img.style.top = Math.random()*75 + "%";
  main.appendChild(img);

  let dragging=false,ox=0,oy=0;
  img.addEventListener("mousedown",e=>{
    dragging=true;
    ox=e.clientX-img.offsetLeft;
    oy=e.clientY-img.offsetTop;
    e.stopPropagation();
  });
  document.addEventListener("mousemove",e=>{
    if(!dragging) return;
    img.style.left=e.clientX-ox+"px";
    img.style.top=e.clientY-oy+"px";
  });
  document.addEventListener("mouseup",()=>dragging=false);
});

/* flow */
let mainShown = false;

document.body.addEventListener("click",()=>{
  if(mainShown) return;

  if(slideIndex < slides.length-1){
    slideEls[slideIndex].style.display="none";
    slideIndex++;
    slideEls[slideIndex].style.display="flex";
    return;
  }

  slideEls[slideIndex].style.display="none";
  bow.style.display="flex";
  door.style.display="block";
});

bow.addEventListener("click",e=>{
  e.stopPropagation();
  ribbonSound.currentTime=0;
  ribbonSound.play();
  bow.classList.add("untie");
  setTimeout(()=>bow.style.display="none",700);
});

door.addEventListener("click",e=>{
  e.stopPropagation();
  doorSound.currentTime=0;
  doorSound.play();
  door.src="dooropen.png";
  setTimeout(()=>{
    door.style.display="none";
    main.style.display="block";
    mainShown=true;
  },1000);
});
</script>
</body>
</html>
