<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>happy birthday annie</title>

<style>
html,body{
  margin:0;padding:0;width:100%;height:100%;
  background:#ffd7e8;overflow:hidden;
  font-family:"Comic Sans MS",cursive;
}
#app{width:100%;height:100%;position:relative}

/* slides */
.slide{
  position:absolute;inset:0;
  display:none;
  justify-content:center;
  align-items:center
}
.slide img{max-width:70%;max-height:70%}

/* bow */
#bow{
  position:absolute;
  top:50%;left:50%;
  transform:translate(-50%,-50%);
  display:none;
  gap:8px;
  z-index:5
}
#bow img{width:160px;transition:.6s}
#bow.untie img:first-child{
  transform:translateX(-220px) rotate(-20deg);
  opacity:0
}
#bow.untie img:last-child{
  transform:translateX(220px) rotate(20deg);
  opacity:0
}

/* door */
#door{
  position:absolute;
  top:50%;left:50%;
  transform:translate(-50%,-50%);
  display:none;
  max-width:300px;
  z-index:4
}

/* main */
#main{
  display:none;
  width:100%;height:100%;
  position:relative
}
#title{
  position:absolute;
  top:8%;left:50%;
  transform:translateX(-50%);
  font-size:3em;
  color:white;
  text-shadow:2px 2px 6px #ff9ed9
}

/* floating images */
.float{
  position:absolute;
  width:90px;
  animation:float 4s ease-in-out infinite alternate;
  cursor:pointer
}
@keyframes float{
  from{transform:translateY(0)}
  to{transform:translateY(-25px)}
}

/* overlays */
.overlay{
  display:none;
  position:fixed;inset:0;
  background:rgba(255,215,232,.95);
  z-index:999;
  justify-content:center;
  align-items:center
}
.overlayContent{
  position:relative;
  max-width:90vw;
  max-height:90vh
}
.closeBtn{
  position:absolute;
  top:-10px;right:-10px;
  background:#ff9ed9;
  color:white;
  width:32px;height:32px;
  border-radius:50%;
  text-align:center;
  line-height:32px;
  font-size:20px;
  cursor:pointer
}

/* gallery */
.polaroid{
  position:absolute;
  background:white;
  padding:8px 8px 20px 8px;
  box-shadow:0 6px 12px rgba(0,0,0,.15)
}
.polaroid img{width:160px}

/* maze */
#mazeBox{
  width:520px;height:520px;
  background:#ffc4df;
  border-radius:16px;
  position:relative
}
#player{position:absolute;width:36px;left:20px;top:20px}
.wall{position:absolute;background:#ff8fc7}
#goal{
  position:absolute;
  width:40px;height:40px;
  right:20px;bottom:20px;
  background:white;border-radius:50%
}
</style>
</head>

<body>
<div id="app"></div>

<audio id="ribbonSound" src="ribbon.mp3"></audio>
<audio id="doorSound" src="doorwow.mp3"></audio>

<!-- GALLERY -->
<div id="galleryOverlay" class="overlay">
  <div class="overlayContent">
    <div class="closeBtn" onclick="galleryOverlay.style.display='none'">✕</div>
  </div>
</div>

<!-- SPOTIFY -->
<div id="spotifyOverlay" class="overlay">
  <div class="overlayContent">
    <div class="closeBtn" onclick="spotifyOverlay.style.display='none'">✕</div>
    <iframe style="border-radius:12px"
      src="https://open.spotify.com/embed/playlist/0zxE4sI9k9ldR12Q4fImLc"
      width="380" height="380" frameborder="0"
      allow="encrypted-media"></iframe>
  </div>
</div>

<!-- MAZE -->
<div id="mazeOverlay" class="overlay">
  <div id="mazeBox" class="overlayContent">
    <div class="closeBtn" onclick="mazeOverlay.style.display='none'">✕</div>
    <img id="player" src="maze.PNG">
    <div id="goal"></div>
    <div class="wall" style="left:0;top:0;width:100%;height:20px"></div>
    <div class="wall" style="left:0;top:0;width:20px;height:100%"></div>
    <div class="wall" style="right:0;top:0;width:20px;height:100%"></div>
    <div class="wall" style="left:0;bottom:0;width:100%;height:20px"></div>
  </div>
</div>

<script>
/* slides */
const app=document.getElementById("app");
const slides=["slide1.png","slide2.png","slide3.png","slide4.png","slide5.png"];
let slideIndex=0;

slides.forEach((src,i)=>{
  const d=document.createElement("div");
  d.className="slide";
  if(i===0)d.style.display="flex";
  d.innerHTML=`<img src="${src}">`;
  app.appendChild(d);
});
const slideEls=document.querySelectorAll(".slide");

/* bow + door */
const bow=document.createElement("div");
bow.id="bow";
bow.innerHTML=`<img src="bowleft.png"><img src="bowright.png">`;
app.appendChild(bow);

const door=document.createElement("img");
door.id="door";
door.src="doorclosed.png";
app.appendChild(door);

/* main */
const main=document.createElement("div");
main.id="main";
main.innerHTML=`<div id="title">Happy Birthday Annie</div>`;
app.appendChild(main);

/* flow */
let mainShown=false;
document.body.onclick=()=>{
  if(mainShown)return;
  if(slideIndex<slides.length-1){
    slideEls[slideIndex++].style.display="none";
    slideEls[slideIndex].style.display="flex";
    return;
  }
  slideEls[slideIndex].style.display="none";
  bow.style.display="flex";
  door.style.display="block";
};

bow.onclick=e=>{
  e.stopPropagation();
  ribbonSound.play();
  bow.classList.add("untie");
  setTimeout(()=>bow.style.display="none",700);
};

door.onclick=e=>{
  e.stopPropagation();
  doorSound.play();
  door.src="dooropen.png";
  setTimeout(()=>{
    door.style.display="none";
    main.style.display="block";
    mainShown=true;
  },1000);
};

/* floating images */
const pics=[
"pic2.png","pic3.png","pic11.png","pic32.png",
"pic4.png","pic5.png","pic6.png","pic7.png"
];

pics.forEach(src=>{
  const img=document.createElement("img");
  img.src=src;
  img.className="float";
  img.style.left=Math.random()*80+"%";
  img.style.top=Math.random()*70+"%";
  main.appendChild(img);

  if(src==="pic11.png") img.onclick=()=>spotifyOverlay.style.display="flex";
  if(src==="pic32.png") img.onclick=openGallery;
  if(src==="pic3.png") img.onclick=()=>mazeOverlay.style.display="flex";
});

/* gallery photos */
const usPhotos=[
"photos of us (1).jpg","photos of us (2).jpg","photos of us (3).jpg",
"photos of us (4).jpg","photos of us (5).jpg","photos of us (6).jpg"
];

function openGallery(){
  const box=galleryOverlay.querySelector(".overlayContent");
  box.querySelectorAll(".polaroid").forEach(p=>p.remove());
  galleryOverlay.style.display="flex";

  usPhotos.forEach(src=>{
    const img=new Image();
    img.onload=()=>{
      const p=document.createElement("div");
      p.className="polaroid";
      p.style.left=Math.random()*60+"%";
      p.style.top=Math.random()*60+"%";
      p.appendChild(img);
      box.appendChild(p);
    };
    img.src=src;
  });
}

/* maze movement */
const player=document.getElementById("player");
document.addEventListener("keydown",e=>{
  if(mazeOverlay.style.display!=="flex")return;
  let dx=0,dy=0;
  if(e.key==="ArrowUp"||e.key==="w")dy=-6;
  if(e.key==="ArrowDown"||e.key==="s")dy=6;
  if(e.key==="ArrowLeft"||e.key==="a")dx=-6;
  if(e.key==="ArrowRight"||e.key==="d")dx=6;
  player.style.left=player.offsetLeft+dx+"px";
  player.style.top=player.offsetTop+dy+"px";
});
</script>
</body>
</html>
