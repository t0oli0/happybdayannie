<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>happy birthday annie</title>

<style>
html,body{margin:0;padding:0;width:100%;height:100%;background:#ffd7e8;overflow:hidden;font-family:"Comic Sans MS",cursive;cursor:pointer}
#app{width:100%;height:100%;position:relative}
.slide{position:absolute;inset:0;display:none;justify-content:center;align-items:center}
.slide img{max-width:70%;max-height:70%}
#bow{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);display:none;gap:8px;z-index:5}
#bow img{width:160px;transition:.6s}
#bow img:first-child{margin-right:-6px}
#bow img:last-child{margin-left:-6px}
#bow.untie img:first-child{transform:translateX(-220px) rotate(-20deg);opacity:0}
#bow.untie img:last-child{transform:translateX(220px) rotate(20deg);opacity:0}
#door{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);display:none;max-width:300px;z-index:4}
#main{display:none;width:100%;height:100%;position:relative}
#title{position:absolute;top:8%;left:50%;transform:translateX(-50%);font-size:3em;color:white;text-shadow:2px 2px 6px #ff9ed9}
.float{position:absolute;width:90px;animation:float 4s ease-in-out infinite alternate;cursor:grab;user-select:none}
@keyframes float{from{transform:translateY(0)}to{transform:translateY(-25px)}}
#overlay{display:none;position:fixed;inset:0;background:rgba(255,215,232,.92);z-index:999;justify-content:center;align-items:center}
#game{position:relative;width:520px;height:360px;background:#ffb6d9;border-radius:14px}
#exit{position:absolute;top:8px;right:12px;font-size:22px;color:white;cursor:pointer}
#cat{position:absolute;left:40px;bottom:40px;width:180px}
#cake{position:absolute;right:110px;bottom:80px;width:90px}
#knife{position:absolute;right:40px;bottom:80px;width:60px}
#slice{position:absolute;width:90px;display:none;pointer-events:none}
</style>
</head>

<body>
<div id="app"></div>

<audio id="ribbonSound" src="ribbon.mp3"></audio>
<audio id="doorSound" src="doorwow.mp3"></audio>

<div id="overlay">
  <div id="game">
    <div id="exit">âœ•</div>
    <img id="cat" src="cat_standing.png">
    <img id="cake" src="cake_full.png">
    <img id="knife" src="knife.png">
    <img id="slice" src="cake_slice.png">
  </div>
</div>

<script>
const app=document.getElementById("app");
const slides=["slide1.png","slide2.png","slide3.png","slide4.png","slide5.png"];
let slideIndex=0;
slides.forEach((src,i)=>{const d=document.createElement("div");d.className="slide";if(i===0)d.style.display="flex";const img=document.createElement("img");img.src=src;d.appendChild(img);app.appendChild(d)});
const slideEls=document.querySelectorAll(".slide");

const bow=document.createElement("div");
bow.id="bow";bow.innerHTML=`<img src="bowleft.png"><img src="bowright.png">`;app.appendChild(bow);

const door=document.createElement("img");
door.id="door";door.src="doorclosed.png";app.appendChild(door);

const main=document.createElement("div");
main.id="main";main.innerHTML=`<div id="title"></div>`;app.appendChild(main);

const pics=[ "pic2.png","pic3.png","pic4.png","pic5.png","pic6.png","pic7.png","pic8.png","pic9.png","pic10.png",
"pic11.png","pic12.png","pic13.png","pic14.png","pic15.png","pic16.png","pic18.png","pic19.png","pic20.png",
"pic21.png","pic22.png","pic23.png","pic24.png","pic25.png","pic26.png","pic28.png","pic29.png","pic30.png",
"pic31.png","pic32.png","pic33.png","pic34.png","pic35.png","pic36.png","pic38.png","pic39.png","pic40.png",
"pic41.png","pic42.png","pic43.png","pic44.png","pic45.png" ];

let pic2El=null;
pics.forEach(src=>{
  const img=document.createElement("img");
  img.src=src;img.className="float";
  img.style.left=Math.random()*85+"%";
  img.style.top=Math.random()*75+"%";
  main.appendChild(img);
  makeDraggable(img);
  if(src==="pic2.png")pic2El=img;
});

function makeDraggable(el){
  let d=false,ox=0,oy=0;
  el.onmousedown=e=>{d=true;ox=e.clientX-el.offsetLeft;oy=e.clientY-el.offsetTop;e.stopPropagation()};
  window.onmousemove=e=>{if(!d)return;el.style.left=e.clientX-ox+"px";el.style.top=e.clientY-oy+"px"};
  window.onmouseup=()=>d=false;
}

function typewriter(){
  const t=document.getElementById("title"),txt="Happy Birthday Annie";
  let i=0,f=true;
  setInterval(()=>{t.textContent=txt.slice(0,f?++i:--i);if(i>=txt.length)f=false;if(i<=0)f=true},150);
}

let mainShown=false;
document.body.onclick=()=>{
  if(mainShown)return;
  if(slideIndex<slides.length-1){slideEls[slideIndex++].style.display="none";slideEls[slideIndex].style.display="flex";return}
  slideEls[slideIndex].style.display="none";bow.style.display="flex";door.style.display="block";
};

bow.onclick=e=>{e.stopPropagation();document.getElementById("ribbonSound").play();bow.classList.add("untie");setTimeout(()=>bow.style.display="none",700)};
door.onclick=e=>{e.stopPropagation();document.getElementById("doorSound").play();door.src="dooropen.png";setTimeout(()=>{door.style.display="none";main.style.display="block";mainShown=true;typewriter()},1000)};

/* -------- feeding game -------- */
const overlay=document.getElementById("overlay");
const game=document.getElementById("game");
const cat=document.getElementById("cat");
const cake=document.getElementById("cake");
const knife=document.getElementById("knife");
const slice=document.getElementById("slice");
const exit=document.getElementById("exit");

const frames=["cat_standing.png","cat_eating.png","cat_fat1_standing.png","cat_fat1_eating.png","cat_fat2_standing.png","cat_fat2_eating.png","cat_fat3_standing.png","cat_fat3_eating.png","cat_done.png"];

let stage=0;
let holdingKnife=false;
let holdingSlice=false;
let canAdvanceEating=false;

pic2El.onclick=e=>{e.stopPropagation();overlay.style.display="flex"};
exit.onclick=()=>{overlay.style.display="none";resetGame()};

function resetGame(){
  stage=0;
  cat.src=frames[0];
  holdingKnife=false;
  holdingSlice=false;
  canAdvanceEating=false;
  slice.style.display="none";
}

function toGame(e){
  const r=game.getBoundingClientRect();
  return {x:e.clientX-r.left,y:e.clientY-r.top};
}

knife.onmousedown=e=>{
  const p=toGame(e);
  holdingKnife=true;
  knife.style.pointerEvents="none";
  knife.style.left=p.x-knife.width/2+"px";
  knife.style.top=p.y-knife.height/2+"px";
  e.stopPropagation();
};

overlay.onmousemove=e=>{
  const p=toGame(e);
  if(holdingKnife){knife.style.left=p.x-knife.width/2+"px";knife.style.top=p.y-knife.height/2+"px"}
  if(holdingSlice){slice.style.left=p.x-slice.width/2+"px";slice.style.top=p.y-slice.height/2+"px"}
};

cake.onclick=e=>{
  if(!holdingKnife)return;
  const p=toGame(e);
  holdingKnife=false;
  holdingSlice=true;
  knife.style.pointerEvents="auto";
  slice.style.display="block";
  slice.style.left=p.x-slice.width/2+"px";
  slice.style.top=p.y-slice.height/2+"px";
};

overlay.onmouseup=()=>{
  if(!holdingSlice)return;
  const a=slice.getBoundingClientRect();
  const b=cat.getBoundingClientRect();
  if(!(a.right<b.left||a.left>b.right||a.bottom<b.top||a.top>b.bottom)){
    holdingSlice=false;
    slice.style.display="none";
    stage++;
    cat.src=frames[stage];     // eating
    canAdvanceEating=true;     // ðŸ”’ lock
  }
};

cat.onclick=()=>{
  if(canAdvanceEating && frames[stage].includes("eating")){
    canAdvanceEating=false;
    stage++;
    cat.src=frames[stage];
    if(frames[stage]==="cat_done.png"){
      cat.onclick=()=>{overlay.style.display="none";resetGame()};
    }
  }
};
</script>
</body>
</html>
